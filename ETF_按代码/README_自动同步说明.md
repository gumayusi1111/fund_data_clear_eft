# ETF 数据自动同步系统

## 功能说明
自动从百度网盘同步新增月份的 ETF 数据，并合并到本地历史数据中。

## 首次配置

1. **安装 bypy**
   ```bash
   pip install bypy
   ```

2. **授权百度网盘**
   ```bash
   bypy info
   ```
   按提示在浏览器中完成授权。

## 使用方法

### 自动同步（推荐）
```bash
python ETF_按代码/etf_auto_sync.py
```
脚本会自动：
- 扫描百度网盘中的新增月份目录
- 下载到临时目录
- 合并到对应的历史目录
- 清理临时文件

### 手动同步特定月份
修改脚本末尾，取消注释并指定年月：
```python
manual_sync_specific_month(2025, 7)  # 同步 2025年7月
```

## 百度网盘目录结构
请确保百度网盘中的目录结构如下：
```
/ETF_按代码/
  ├── 0_ETF日K(前复权)_2025年7月/
  ├── 0_ETF日K(后复权)_2025年7月/
  └── 0_ETF日K(除权)_2025年7月/
```

## 注意事项
1. 每个月份目录命名格式：`类别_YYYY年M月`
2. 脚本会自动跳过已下载的月份
3. 合并时会自动去重，保留最新数据
4. 建议定期运行，或加入定时任务

## 定时任务设置（可选）

### macOS/Linux
```bash
# 编辑 crontab
crontab -e

# 每周一早上 9 点运行
0 9 * * 1 cd /Users/wenbai/Desktop/data_clear && /usr/bin/python ETF_按代码/etf_auto_sync.py >> etf_sync.log 2>&1
```

### Windows
使用任务计划程序创建定时任务。

## 故障排除
- 如果连接失败，重新运行 `bypy info` 授权
- 检查网络连接和百度网盘空间
- 查看脚本输出的错误信息 