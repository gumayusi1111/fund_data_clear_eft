# ETF数据自动同步系统

🚀 一个全自动的ETF数据获取、处理和更新系统，支持从百度网盘自动下载最新ETF数据并合并到历史数据库中。

## 🌟 功能特点

- ✅ **自动时间识别**：基于系统时间自动识别当前月份需要处理的数据
- ✅ **智能文件管理**：自动从百度网盘下载、解压RAR文件
- ✅ **数据去重合并**：智能合并新数据到历史数据，自动去重
- ✅ **多复权支持**：支持前复权、后复权、除权三种数据类型
- ✅ **完整数据覆盖**：包含1000+个ETF代码的完整历史数据
- ✅ **自动清理**：处理完成后自动清理临时文件

## 📁 项目结构

```
data_clear/
├── ETF_按代码/                    # 按ETF代码组织的数据
│   ├── 0_ETF日K(前复权)/          # 前复权数据
│   ├── 0_ETF日K(后复权)/          # 后复权数据
│   ├── 0_ETF日K(除权)/            # 除权数据
│   ├── etf_auto_sync.py          # 自动同步主程序
│   └── etf_data_merger.py        # 数据合并脚本
├── ETF_按日期/                    # 按日期组织的数据
├── config/                       # 配置文件目录
│   ├── config.json              # 主配置文件
│   └── file_hashes.json         # 文件哈希记录
├── scripts/                      # 脚本目录
├── logs/                         # 日志目录
└── requirements.txt              # Python依赖
```

## 🛠️ 安装和配置

### 1. 环境要求

- Python 3.8+
- macOS/Linux系统
- 百度网盘账号

### 2. 安装依赖

```bash
# 创建虚拟环境
python -m venv data_clear_env
source data_clear_env/bin/activate  # macOS/Linux

# 安装依赖
pip install -r requirements.txt

# macOS用户安装解压工具
brew install unar
```

### 3. 配置百度网盘

```bash
# 安装bypy工具
pip install bypy

# 登录百度网盘
bypy info
```

## 🚀 使用方法

### 自动同步当前月份数据

```bash
cd ETF_按代码
python etf_auto_sync.py
```

系统会自动：
1. 识别当前月份（如2025年6月）
2. 在百度网盘中查找对应的RAR文件
3. 下载并解压数据文件
4. 合并到历史数据中
5. 清理临时文件

### 手动处理历史数据

```bash
cd ETF_按代码
python etf_data_merger.py
```

## 📊 数据格式

每个CSV文件包含以下字段：
- `代码`: ETF代码（如159915.SZ）
- `日期`: 交易日期（YYYYMMDD格式）
- `开盘价`: 开盘价格
- `最高价`: 当日最高价
- `最低价`: 当日最低价
- `收盘价`: 收盘价格
- `上日收盘`: 前一交易日收盘价
- `涨跌`: 价格变动
- `涨幅%`: 涨跌幅百分比
- `成交量(手数)`: 成交量
- `成交额(千元)`: 成交金额

## 🔍 数据验证

系统已通过真实市场数据验证：

- ✅ **159915创业板ETF**验证通过
- ✅ 价格数据与东方财富、易方达官网完全一致
- ✅ 成交量、成交额数据准确匹配
- ✅ 数据精度达到专业投资分析标准

## 📈 覆盖范围

- **ETF数量**：1000+ 个ETF代码
- **数据历史**：从各ETF成立日期至今
- **更新频率**：月度更新
- **数据类型**：日K线数据（前复权、后复权、除权）

## ⚠️ 注意事项

1. 首次运行需要配置百度网盘登录
2. 确保网络连接稳定
3. 大量数据处理可能需要较长时间
4. 建议定期备份重要数据

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 许可证

MIT License

## 📞 联系方式

如有问题或建议，请创建Issue或联系项目维护者。

---

⭐ 如果这个项目对您有帮助，请给个星标支持！ 